{
    "version": 2,
    "builds": [
      {
        "src": "frontend/package.json",
        "use": "@vercel/static-build",
        "config": { "distDir": "frontend/dist" }
      },
      {
        "src": "backend/api/*.js",  
        "use": "@vercel/node"
      }
    ],
    "routes": [
      { "src": "/api/(.*)", "dest": "/backend/api/$1.js" },
      { 
        "src": "/assets/(.*)", 
        "dest": "/frontend/dist/assets/$1",
        "headers": { "cache-control": "public, max-age=31536000, immutable" }
      },
      { 
        "src": "/(.*)\\.(?:ico|png|jpg|jpeg|gif|svg|css|js)$", 
        "dest": "/frontend/dist/$1.$2" 
      },
      { 
        "src": "/(.*)", 
        "dest": "/frontend/dist/index.html",
        "headers": { "cache-control": "public, max-age=0, must-revalidate" }
      }
    ]
  }